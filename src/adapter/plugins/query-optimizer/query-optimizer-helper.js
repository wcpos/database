var r=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,o,i=e.call(r),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(r){o={error:r}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a};import{getPrimaryFieldOfPrimaryKey as t,normalizeMangoQuery as e}from"rxdb";export function getFieldsOfQuery(n,o){var i=t(n.primaryKey),a=new Set,c=e(n,o);return a.add(i),c.sort.forEach((function(r){var t=Object.keys(r)[0];a.add(t)})),c.selector&&Object.entries(c.selector).forEach((function(t){var e=r(t,2),n=e[0];e[1];a.add(n)})),a}export function averageOfTimeValues(r,t){r=r.sort((function(r,t){return r-t}));var e=Math.floor(r.length*(.01*t)),n=r.slice(0,r.length-e),o=0;return n.forEach((function(r){return o+=r})),o/n.length}export function sortIndexTimes(r){function t(r,t){return r.time<t.time?-1:r.time>t.time?1:0}return r.slice(0).sort(t)}