import{ensureRxStorageInstanceParamsAreCorrect as t,INTERNAL_STORE_SCHEMA_TITLE as e}from"rxdb";import{checkVersion as r}from"../../shared/version-check";import{getRxStorageLocalstorage as a}from"./rx-storage-localstorage";var s=a();export function getLocalstorageMetaOptimizerRxStorage(t){return new RxStorageLocalstorageMetaOptimized(t)}export var RxStorageLocalstorageMetaOptimized=function(){function a(t){this.name="localstorage-meta-optimized",this.statics=Object.assign({},s.statics,{prepareQuery:(t,r)=>t.title===e?s.statics.prepareQuery(t,r):this.settings.storage.statics.prepareQuery(t,r)}),this.settings=t}return a.prototype.createStorageInstance=async function(a){return t(a),r(),a.schema.title===e?s.createStorageInstance(a):this.settings.storage.createStorageInstance(a)},a}();