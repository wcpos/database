import{flatClone as r}from"rxdb/plugins/utils";import{getRxStorageRemote as t}from"rxdb/plugins/storage-remote";import{Subject as e}from"rxjs";import o from"web-worker";export function getRxStorageWorker(r){var e=getWorkerStateByInput(r.workerInput);return e.statics=r.statics,t(e)}var s=new Map;export function getWorkerStateByInput(t){var n=s.get(t);if(!n){var a=new o(t),i=[];a.onerror=r=>{i.push(r)};var p=new e;a.onmessage=r=>{var t=r.data;p.next(t)},n={identifier:"worker",statics:{},messages$:p,send(r){a.postMessage(r)}},"string"==typeof t&&s.set(t,n)}return r(n)}