import{getFromMapOrThrow as o}from"rxdb";import{exposeRxStorageRemote as e}from"rxdb/plugins/storage-remote";import{Subject as n}from"rxjs";export function exposeSharedWorkerRxStorage(r){var t=new n,s=new Map;self.onconnect=function(o){var e=o.ports[0];e.onmessage=function(o){var n=o.data;s.set(n.connectionId,e),t.next(n)}},e({storage:r.storage,messages$:t,send:function(e){o(s,e.connectionId).postMessage(e)}})}